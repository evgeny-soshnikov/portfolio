Описание
Зачастую когда начинаешь писать код, сложно сразу продумать грамотную архитектуру и приходится писать как получится, а потом улучшать — рефакторить код. Или же, придя в новый проект, надо разобраться с чужим кодом и улучшить его.

Техническое задание
Есть файл basket.php, в котором решена задача для хранения списка покупок. Если запустить этот файл php basket.php, то можно будет добавлять новые записи и удалять уже ненужные.

В этом коде есть неприятные моменты:

Дублирующийся код. Например, вывод всего списка покупок на экран и запрос данных от пользователя.
Два вложенных цикла и вложенные switch-case с вложенными условиями, которые делают код сложным для восприятия.
Необходимо упростить структуру, вынеся дублирующиеся и вложенные конструкции в отдельные функции. В отдельных функциях должны оказаться:

участок кода, выводящий список покупок на экран и запрашивающий следующее действие;
все действия, находящиеся внутри case.
В результате основной код должен быть сокращён примерно до такого вида:

<?php

// объявление констант и переменных
// объявление созданных функций 

do {
    $operationNumber = вызовФункции(...);

    echo 'Выбрана операция: '  . $operations[$operationNumber] . PHP_EOL;

    switch ($operationNumber) {
        case OPERATION_ADD:
            вызовФункции(...);
            break;

        case OPERATION_DELETE:
            вызовФункции(...);
            break;

        case OPERATION_PRINT:
            вызовФункции(...);
            break;
    }

    echo "\n ----- \n";
} while ($operationNumber > 0);

echo 'Программа завершена' . PHP_EOL;
Дополнительно обратите внимание:

Постарайтесь, чтобы внутри созданных вами функций не было дублирующихся возможностей, а именно вывода всего списка на экран.
Включите строгий режим для этого файла.
Аргументы всех функций должны быть типизированы.
Результаты всех функций должны быть типизированы.

Улучшите менеджер списка покупок из предыдущего задания:

добавьте возможность изменять название товаров,
добавьте возможность добавлять количество каждого товара.
При этом необходимо весь новый код размещать в функциях.